<!DOCTYPE html>
<html lang="it" xmlns:th="http://www.thymeleaf.org">

  <head>
    <div th:replace="fragments/resources :: headTags"></div>
    <title>Modifica Immagini</title>
  </head>
  <body class="bg-light">
    <nav th:replace="fragments/navbar :: navbar"></nav>
    <div class="container mt-3">
    <h1 class="text-center" th:text="${ricetta.titolo}"></h1>
    <hr>
      <h2 class="text-center">Carica le nuove immagini</h2>
      <div class="row">
        <div class="col-6">
          <div th:each=" img: ${ricetta.immagini}">
            <div class="row mb-2">
              <div class="position-relative border" style="height: 480px; width: 635px;">
                <img th:src="@{|/detail/${img.id}/img|}" style="max-width:95%; max-height:95%; position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);" th:alt="|img${img.id}|">
                <a class="text-decoration-none bg-warning text-dark position-top-right px-4 py-2" th:href="@{|/admin/ricetta/modifica/immagine/cancella/${img.id}|}" onclick="return confirm('Sei sicuro?')" data-bs-toggle="tooltip" data-bs-placement="top" title="Elimina immagine"><i class="fas fa-trash-alt"></i></a> 
              </div>
            </div>
          </div>
        </div>
        <div class="col-6">
          <form
        id="img-form"
        th:object="${immaginiForm}"
        th:action="@{/admin/ricetta/modifica/{id}/immagini(id=${ricetta.id})}"
        method="post"
        enctype="multipart/form-data"
      >
        <div class="row">
          <!--Immagini-->
          <div class="row mx-1" th:object="${immaginiForm}">
            <!--Singola Immagine-->
            <div class="row">
              <label for="content" class="form-label"></label>
              <input
                type="file"
                class="form-control"
                name="content"
                th:field="*{listaImmaginiForm[0].content}"
              />
            </div>
            <div class="row">
              <button
                class="btn btn-warning w-auto mt-2"
                id="imgBtn1"
                type="button"
                th:onclick="addImg(1)"
              >
                <i class="fas fa-plus"></i> Aggiungi nuova immagine
              </button>
            </div>
            <!--Singola Immagine-->
            <div class="row d-none" id="img1">
              <label for="content" class="form-label"></label>
              <input
                type="file"
                class="form-control"
                name="content"
                th:field="*{listaImmaginiForm[1].content}"
              />
            </div>
            <div class="row">
              <button
                class="d-none btn btn-warning w-auto mt-2"
                id="imgBtn2"
                type="button"
                th:onclick="addImg(2)"
              >
                <i class="fas fa-plus"></i> Aggiungi nuova immagine
              </button>
            </div>
            <!--Singola Immagine-->
            <div class="row d-none" id="img2">
              <label for="content" class="form-label"></label>
              <input
                type="file"
                class="form-control"
                name="content"
                th:field="*{listaImmaginiForm[2].content}"
              />
            </div>
            <div class="row">
              <button
                class="d-none btn btn-warning w-auto m-2"
                id="imgBtn3"
                type="button"
                th:onclick="addImg(3)"
              >
                <i class="fas fa-plus"></i> Aggiungi nuova immagine
              </button>
            </div>
            <!--Singola Immagine-->
            <div class="row d-none" id="img3">
              <label for="content" class="form-label"></label>
              <input
                type="file"
                class="form-control"
                name="content"
                th:field="*{listaImmaginiForm[3].content}"
              />
            </div>
            <div class="row">
              <button
                class="d-none btn btn-warning w-auto m-2"
                id="imgBtn4"
                type="button"
                th:onclick="addImg(4)"
              >
                <i class="fas fa-plus"></i> Aggiungi nuova immagine
              </button>
            </div>
            <!--Singola Immagine-->
            <div class="row d-none" id="img4">
              <label for="content" class="form-label"></label>
              <input
                type="file"
                class="form-control"
                name="content"
                th:field="*{listaImmaginiForm[4].content}"
              />
            </div>
            <div class="row">
              <button
                class="d-none btn btn-warning w-auto m-2"
                id="imgBtn5"
                type="button"
                th:onclick="addImg(5)"
              >
                <i class="fas fa-plus"></i> Aggiungi nuova immagine
              </button>
              <div id="imgAlert" class="alert alert-warning w-auto m-2 d-none">
                Numero massimo immagini raggiunto
              </div>
            </div>
          </div>

          <!--Submit-->
          <div class="col-12 mt-2">
            <button class="btn btn-warning" type="submit">
              <i class="fas fa-check"></i> Salva
            </button>
            <a class="btn btn-warning" th:href="@{/admin/modifica}"
              ><i class="fas fa-times"></i> Indietro</a
            >
          </div>
        </div>
      </form>
        </div>
      </div>
      
    </div>
    <script type="text/javascript" th:src="@{/js/mainEdit.js}"></script>
    <div th:replace="fragments/resources :: scripts"></div>
  </body>
</html>
